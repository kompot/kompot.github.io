(this["webpackJsonpfintrack-client-only"]=this["webpackJsonpfintrack-client-only"]||[]).push([[0],{241:function(e,t,a){e.exports=a(258)},250:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(44),l=a.n(i),o=a(51),c=a(61),s=a(33),u=a(115),d=a(72),m=a(201),v=a(29),f=a(169),p=a(227),E=a(165),b=a.n(E),g=a(166),h=a.n(g),y=Object(m.a)({id:"fetch",initial:"idle",context:{url:"",data:null,error:null,retries:0,maxRetries:3},states:{idle:{on:{FETCH:"loading"}},loading:{invoke:{src:"fetch",onDone:{target:"success",actions:["setData","notifyData",Object(v.r)("LOADED")]},onError:{target:"failure",actions:["setError","notifyError"]}}},success:{on:{REFETCH:{target:"loading",actions:"resetRetries"}}},failure:{on:{"":{target:"fatal",cond:"canNotRetry"},RETRY:{target:"loading",actions:"incrementRetries"}}},fatal:{type:"final"}}},{guards:{canNotRetry:function(e){return e.retries===e.maxRetries}},actions:{setData:Object(v.b)({data:function(e,t){return t.data}}),notifyData:function(){console.log("-----notifydata")},setError:Object(v.b)({error:function(e,t){return t.data}}),notifyError:function(){},incrementRetries:Object(v.b)({retries:function(e){return e.retries+1}})},services:{fetch:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return fetch(e.url).then((function(e){return e.json()})).then((function(e){return e}))}))}}),x=Object(p.a)("ABCDEFGHJKLMNPQRSTUVWXYZ123456789",6),A={settings:{alphaVantageToken:""},data:{institutions:[],assets:[],assetAccounts:[],assetAccountStates:[],reports:[],exchangeRates:[]}},O=function(e){var t=new Date(e);return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())},S=b()(new h.a(""));S.setState(A);var w=Object(m.a)({key:"store",initial:"init",context:{db:S,urlDataToSave:void 0,fetchRef:null},entry:Object(v.b)({fetchRef:function(){return Object(f.c)(y.withContext({url:"/data.json",maxRetries:4,data:null,error:null,retries:0}),{name:"fetch"})}}),states:{init:{entry:Object(v.b)((function(e,t){var a=sessionStorage.getItem("fintrack_db");if(null===a)return{};var n=JSON.parse(a),r=b()(new h.a(""));return r.setState(n),{db:r}})),on:{"":"idle"}},idle:{on:{LOAD:{actions:Object(v.q)("FETCH",{to:"fetch"})},LOADED:"loaded",UPDATE_DATA:"updating_data",LOAD_FROM_INPUT:"loaded_from_input"}},loaded:{entry:Object(v.b)((function(e,t){void 0!==e.urlDataToSave&&window.URL.revokeObjectURL(e.urlDataToSave);var a=b()(new h.a(""));return a.setState(e.fetchRef._state.context.data),{db:a,urlDataToSave:void 0}})),on:{SAVE:"saving",UPDATE_DATA:"updating_data"}},loaded_from_input:{entry:Object(v.b)((function(e,t){console.log("=========loaded_from_input",t);var a=b()(new h.a(""));return a.setState(t.data),sessionStorage.setItem("fintrack_db",JSON.stringify(t.data)),{db:a,urlDataToSave:void 0}})),on:{SAVE:"saving",UPDATE_DATA:"updating_data",LOAD_FROM_INPUT:"loaded_from_input"}},saving:{entry:Object(v.b)((function(e,t){return{urlDataToSave:window.URL.createObjectURL(new Blob([JSON.stringify(e.db.getState(),null,2)],{type:"text/plain"}))}})),on:{SAVED:"loaded"}},updating_data:{entry:Object(v.b)((function(e,t){if("create"===t.actionType)if("assetAccountStates"===t.entity){var a=x();e.db.get("data").get("reports").push({id:a,datetime:O(t.data.date)}).write(),t.data.assetAccountStates.forEach((function(t){e.db.get("data").get("assetAccountStates").push(Object(d.a)(Object(d.a)({},t),{},{reportId:a})).write()})),e.db.get("data").get("exchangeRates").push({id:x(),reportId:a,data:t.data.exchangeRates}).write()}else{var n;null===(n=e.db.get("data"))||void 0===n||n.get(t.entity).push(Object(d.a)({id:x()},t.data)).write()}else if("update"===t.actionType){if("assetAccountStates"===t.entity){var r=e.db.get("data").get("reports"),i=null===r||void 0===r?void 0:r.find((function(e){return e.id===t.data.reportId}));null===i||void 0===i||i.set("datetime",O(t.data.date)).write();var l=[];e.db.get("data").get("assetAccountStates").forEach((function(e){var a;e.reportId===t.data.reportId&&(e.balance=null===(a=t.data.assetAccountStates.find((function(t){return t.assetAccountId===e.assetAccountId})))||void 0===a?void 0:a.balance,l.push(e.assetAccountId))})).write(),t.data.assetAccountStates.filter((function(e){return!l.includes(e.assetAccountId)})).forEach((function(a){e.db.get("data").get("assetAccountStates").push(Object(d.a)(Object(d.a)({},a),{},{reportId:t.data.reportId})).write()})),e.db.get("data").get("exchangeRates").find((function(e){return e.reportId===t.data.reportId})).set("data",t.data.exchangeRates).write()}if("institutions"===t.entity){var o=e.db.get("data").get("institutions"),c=null===o||void 0===o?void 0:o.find((function(e){return e.id===t.data.id}));null===c||void 0===c||c.assign(t.data).write()}}else{if("delete"!==t.actionType)throw new Error("How did you end up here?");"institutions"===t.entity&&e.db.get("data").get("institutions").remove((function(e){return e.id===t.data.id})).write(),"assets"===t.entity&&e.db.get("data").get("assets").remove((function(e){return e.id===t.data.id})).write(),"assetAccounts"===t.entity&&e.db.get("data").get("assetAccounts").remove((function(e){return e.id===t.data.id})).write(),"reports"===t.entity&&(e.db.get("data").get("reports").remove((function(e){return e.id===t.data.id})).write(),e.db.get("data").get("assetAccountStates").remove((function(e){return e.reportId===t.data.id})).write(),e.db.get("data").get("exchangeRates").remove((function(e){return e.reportId===t.data.id})).write())}return sessionStorage.setItem("fintrack_db",JSON.stringify(e.db.getState())),{}})),on:{"":"idle"}}}}),j=a(36),I=a.n(j),T=a(50),C=a(228),k=a(229),_=a(308),R=a(311),D=a(314),B=a(312),F=a(313),U=a(95),N=(a(250),function(e){var t=e.children;return(r.a.createElement("table",{className:"_3-1r7"},t))}),L=function(e){var t=e.children;return(r.a.createElement("tr",{className:"_3Mjlo"},t))},M=function(e){var t=e.children,a=e.colspan;return(r.a.createElement("td",{className:"zX0YF",colSpan:a},t))},P=function(e){var t=e.children,a=e.colspan;return(r.a.createElement("th",{className:"_1rfFa",colSpan:a},t))},q=a(62),Y=["CURRENCY","CRYPTO_CURRENCY","SECURITY","VALUABLE_ASSET","PRECIOUS_METAL"],z=["BANK","BROKER","PERSON","PHYSICAL_LOCATION","E-WALLET","OTHER"],V=[2,",","."],X=a(205),W=a.n(X);function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V;return W.a.formatMoney.apply(W.a,[e,t].concat(Object(q.a)(a)))}function H(e){var t=e.store,a=e.report,n=e.assetFilterFunction,r=e.mode,i=[],l=t.data.assetAccountStates;return void 0!==a&&(l=l.filter((function(e){return e.reportId===a.id}))),l.forEach((function(e){var a=parseFloat(e.balance),l=!1;switch(r){case void 0:l=0!==a;break;case"assets":l=a>0;break;case"liabilities":l=a<0}if(l){var o=t.data.assetAccounts.find((function(t){return t.id===e.assetAccountId})),c=t.data.assets.find((function(e){return e.id===o.assetId}));(void 0===n||n(c))&&i.push(c.class)}})),I.a.uniq(i)}function G(e,t,a,n,r){return e.data.assetAccountStates.filter((function(e){return e.reportId===t.id})).reduce((function(i,l){var o;if(void 0!==r&&!r(l))return i;var c=e.data.assetAccounts.find((function(e){return e.id===l.assetAccountId})),s=e.data.assets.find((function(e){return e.id===c.assetId}));if(void 0!==n&&!n(s))return i;var u=null===(o=e.data.exchangeRates.find((function(e){return e.reportId===t.id})))||void 0===o?void 0:o.data;return function(e,t,a,n){if(void 0===t)return new U.Big(0);var r="CURRENCY"===a.class,i=r?a:e.data.assets.find((function(e){return"CURRENCY"===e.class&&e.name===a.currency})),l=new U.Big(1);if(i.currency!==n){var o=e.data.assets.find((function(e){return"CURRENCY"===e.class&&e.name===n}));if(void 0!==o){var c=t[o.id];l=null!==c?new U.Big(c):new U.Big(0)}}return l.eq(0)?new U.Big(0):new U.Big(t[i.id]||0).div(l).mul(r?new U.Big(1):new U.Big(t[a.id]||0))}(e,u,s,a).mul(new U.Big(l.balance)).plus(i)}),new U.Big(0))}function K(e){return I.a.sortBy(e.data.institutions,(function(e){return e.sortIndex}))}function Q(e){var t;return null===(t=K(e))||void 0===t?void 0:t.flatMap((function(t){return I.a.sortBy(e.data.assetAccounts.filter((function(e){return e.institutionId===t.id})),(function(e){return e.name}))}))}var Z=function(e){var t,a=Object(n.useContext)(It),i=Object(n.useContext)(Tt),l=Q(a);if(void 0===l)return null;var o=I.a.sortBy(a.data.reports,(function(e){return-1*e.datetime}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Your net worth is..."),r.a.createElement(_.a,{color:"primary","aria-label":"add",component:c.b,to:"add-edit-report",style:{margin:0,top:"auto",right:20,bottom:80,left:"auto",position:"fixed"}},r.a.createElement(R.a,null)),r.a.createElement(N,null,r.a.createElement("thead",null,r.a.createElement(L,null,r.a.createElement(P,null),null===(t=K(a))||void 0===t?void 0:t.map((function(e){return r.a.createElement(P,{key:e.id,colspan:l.filter((function(t){return t.institutionId===e.id})).length},e.name)}))),r.a.createElement(L,null,r.a.createElement(P,null,"date"),l.map((function(e){return r.a.createElement(P,null,e.name)})),i.reportCurrencies.map((function(e){return r.a.createElement(P,null,"Total in ",e)})))),r.a.createElement("tbody",null,null===o||void 0===o?void 0:o.map((function(t){var n=a.data.assetAccountStates.filter((function(e){return e.reportId===t.id}));return(r.a.createElement(L,{key:t.id},r.a.createElement(M,null,r.a.createElement(B.a,{variant:"outlined",size:"small",color:"primary",component:c.b,to:"add-edit-report/".concat(t.id)},new Date(t.datetime).toISOString().substr(0,10))),l.map((function(e){var t=null===n||void 0===n?void 0:n.find((function(t){return t.assetAccountId===e.id}));return(r.a.createElement(M,null,J((null===t||void 0===t?void 0:t.balance)||"0")))})),r.a.createElement(r.a.Fragment,null,I.a.map(i.reportCurrencies,(function(e){return r.a.createElement(M,null,J(G(a,t,e).toFixed(0)))}))),r.a.createElement(M,null,r.a.createElement(F.a,{color:"secondary",size:"small",onClick:function(){return a=t.id,void e.storeService.send("UPDATE_DATA",{actionType:"delete",entity:"reports",data:{id:a}});var a}},r.a.createElement(D.a,null)))))})))))},$=a(43),ee=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.paddingRight=20;var a=e.xAxes.push(new $.d);if(a.renderer.minGridDistance=50,a.renderer.axisFills.template.disabled=!1,a.renderer.axisFills.template.fill=T.c("#1AB0F1"),a.renderer.axisFills.template.fillOpacity=.1,a.dateFormats.setKey("day","MMMM dt"),a.dateFormats.setKey("month","MMM yyyy"),a.periodChangeDateFormats.setKey("month","[bold]MMM yyyy"),t){var n=e.yAxes.push(new $.j);n.renderer.minWidth=35}var r=new $.m;r.xAxis=a,r.fullWidthLineX=!0,r.lineX.strokeWidth=0,r.lineX.fill=T.c("#8F3985"),r.lineX.fillOpacity=.1,e.cursor=r;var i=new $.l;e.scrollbarX=i,e.legend=new $.f};var te=function(e){var t=e.stacked,a="nw_in_currencies_timeline_chart",i=Object(n.useContext)(It),l=[Object(n.useContext)(Ct)],o=i.data.reports,c=l.map((function(e){var t=I.a.compact(null===o||void 0===o?void 0:o.map((function(t){return{date:new Date(t.datetime),value:G(i,t,e).toFixed(0)}})));return{category:e,points:t||[]}}));return Object(n.useEffect)((function(){var e=function(e,t,a,n){var r=T.d(t,$.k),i=r.titles.push(new T.b);return i.text=e,i.fontSize=25,ee(r,!n),I.a.map(a,(function(e,t){var i=r.series.push(new $.g);if(i.data=e.points,i.dataFields.dateX="date",i.dataFields.valueY="value",i.name=e.category,i.strokeWidth=3,i.tooltipText="{name}: [bold]{valueY.value}[/]",i.bullets.push(new $.b),i.tensionX=.8,n){var l=r.yAxes.push(new $.j);i.yAxis=l,l.renderer.line.strokeOpacity=1,l.renderer.line.stroke=i.stroke,l.renderer.grid.template.stroke=i.stroke,l.renderer.grid.template.strokeOpacity=.1,l.renderer.labels.template.fill=i.stroke,l.renderer.minGridDistance=20,l.align="right",0===t?l.marginBottom=20:t===a.length-1?l.marginTop=20:(l.marginTop=10,l.marginBottom=10)}return i})),n&&(r.leftAxesContainer.layout="vertical"),r}("Net worth valuation in currency history",a,c,t);return function(){e.dispose()}}),[c,a,t]),r.a.createElement("div",{id:a,style:{width:"100%",height:"500px",marginBottom:"100px"}})};var ae=function(e){var t=e.stacked,a="nw_diff_in_currencies_timeline_chart",i=Object(n.useContext)(It),l=[Object(n.useContext)(Ct)],o=i.data.reports,c=l.map((function(e){var t=I.a.compact(null===o||void 0===o?void 0:o.map((function(t){return{date:new Date(t.datetime),value:G(i,t,e).toFixed(0)}})));return{category:e,points:t||[]}}));return Object(n.useEffect)((function(){var e=function(e,t,a,n){var r=T.d(t,$.k),i=r.titles.push(new T.b);return i.text=e,i.fontSize=25,ee(r,!n),I.a.map(a,(function(e,t){var i=r.series.push(new $.g);i.data=e.points,i.dataFields.dateX="date",i.dataFields.valueY="value",i.dataFields.valueYShow="previousChange",i.name=e.category,i.strokeWidth=3,i.tensionX=.8,i.tooltipText="{valueY.previousChange}";var l=new $.b;if(i.bullets.push(l),n){var o=r.yAxes.push(new $.j),c=o.createSeriesRange(i);c.value=0,c.endValue=-1e8,c.contents.stroke=T.c("#f00"),c.contents.fill=T.c("#f00"),c.contents.fillOpacity=.2,i.yAxis=o,o.renderer.line.strokeOpacity=1,o.renderer.line.stroke=i.stroke,o.renderer.grid.template.stroke=i.stroke,o.renderer.grid.template.strokeOpacity=.1,o.renderer.labels.template.fill=i.stroke,o.renderer.minGridDistance=20,o.align="right",0===t?o.marginBottom=20:t===a.length-1?o.marginTop=20:(o.marginTop=10,o.marginBottom=10)}return i})),n&&(r.leftAxesContainer.layout="vertical"),r}("Net worth valuation in currency diff",a,c,t);return function(){e.dispose()}}),[c,a,t]),r.a.createElement("div",{id:a,style:{width:"100%",height:"500px",marginBottom:"100px"}})};var ne=function(){var e="nw_valuation_allocation_chart",t=Object(n.useContext)(It),a=Object(n.useContext)(Ct),i=I.a.maxBy(t.data.reports,(function(e){return e.datetime})),l=[];if(i){var o=H({store:t,report:i});l=I.a.map(o,(function(e){var n={class:e,valuationAssets:parseFloat(G(t,i,a,(function(t){return t.class===e}),(function(e){return parseFloat(e.balance)>=0})).valueOf()),valuationLiabilities:parseFloat(G(t,i,a,(function(t){return t.class===e}),(function(e){return parseFloat(e.balance)<0})).valueOf())};return 0==n.valuationLiabilities&&delete n.valuationLiabilities,n}))}return Object(n.useEffect)((function(){var t=function(e,t,a){var n=T.d(e,$.k);n.data=a;var r=I.a.sum(I.a.map(a,(function(e){return e.valuationLiabilities||0}))),i=n.titles.push(new T.b);i.text="Current net worth valuation allocation",i.fontSize=25,i.marginBottom=15;var l=n.yAxes.push(new $.a);l.dataFields.category="class",l.renderer.inversed=!0,l.renderer.minGridDistance=20,l.renderer.grid.template.location=0,l.renderer.axisFills.template.disabled=!1,l.renderer.axisFills.template.fillOpacity=.05,l.renderer.cellStartLocation=.05,l.renderer.cellEndLocation=.95;var o=n.xAxes.push(new $.j);function c(e,a,r){var i=n.series.push(new $.c);i.dataFields.valueX=e,i.dataFields.categoryY="class",i.name=a,i.stroke=r,i.fill=r,"valuationTotal"!==e&&(i.stacked=!0),"valuationAssets"===e?(i.columns.template.column.cornerRadiusBottomRight=5,i.columns.template.column.cornerRadiusTopRight=5):(i.columns.template.column.cornerRadiusBottomLeft=5,i.columns.template.column.cornerRadiusTopLeft=5),i.columns.template.tooltipText="{name}: [bold]{valueX.value.formatNumber('".concat("#,###.s","')} ").concat(t,"[/]");var l=i.bullets.push(new $.e);l.label.text="{name}: [bold]{valueX.value.formatNumber('".concat("#,###.s","')} ").concat(t,"[/]"),"valuationAssets"===e?(l.label.horizontalCenter="right",l.label.dx=-10):(l.label.horizontalCenter="left",l.label.dx=10),l.label.hideOversized=!0,l.label.truncate=!1}o.renderer.minGridDistance=50,o.renderer.ticks.template.length=5,o.renderer.ticks.template.disabled=!1,o.renderer.ticks.template.strokeOpacity=.4,o.extraMax=.1,r&&(o.extraMin=.1),n.numberFormatter.numberFormat="#.#s";var s=new T.a,u=s.getFor("positive"),d=s.getFor("negative");return c("valuationAssets","Assets",u),r&&(c("valuationLiabilities","Liabilities",d),n.legend=new $.f,n.legend.position="bottom"),n.paddingRight=100,n}(e,a,l);return function(){t.dispose()}}),[e,a,l]),r.a.createElement("div",{id:e,style:{height:"400px"}})};var re=function(){var e=Object(n.useContext)(It),t=I.a.maxBy(e.data.reports,(function(e){return e.datetime}));if(t){var a=H({store:e,report:t,mode:"assets"});return(r.a.createElement(r.a.Fragment,null,I.a.map(a,(function(e){return r.a.createElement(ie,{key:e,assetClass:e})}))))}return null},ie=function(e){var t=e.assetClass,a="asset_class_".concat(t,"_nw_dist_by_name_chart"),i=Object(n.useContext)(It),l=Object(n.useContext)(Ct),o=I.a.maxBy(i.data.reports,(function(e){return e.datetime})),c=[];if(o){var s=function(e){var t=e.store,a=e.report,n=e.assetClass,r=[];return t.data.assetAccountStates.filter((function(e){return e.reportId===a.id})).forEach((function(e){if(0!==parseFloat(e.balance)){var a=t.data.assetAccounts.find((function(t){return t.id===e.assetAccountId})),i=t.data.assets.find((function(e){return e.id===a.assetId}));i.class===n&&r.push(i.name)}})),I.a.uniq(r)}({store:i,report:o,assetClass:t});c=s.map((function(e){return{assetClass:t,assetName:e,totalInBaseCurrency:G(i,o,l,(function(a){return a.class===t&&a.name===e})).toFixed(0)}}))}return Object(n.useEffect)((function(){var e=function(e,t,a,n){var r=T.d(t,$.h);r.data=n;var i=r.titles.push(new T.b);i.text=e,i.fontSize=20,r.innerRadius=T.e(30);var l=r.series.push(new $.i);return l.dataFields.value="totalInBaseCurrency",l.dataFields.category="assetName",l.slices.template.strokeWidth=2,l.slices.template.stroke=T.c("#000"),l.slices.template.tooltipText="{value.value.formatNumber('".concat("#,###.","')} ").concat(a),l.labels.template.text="{category}: {value.percent.formatNumber('".concat("#.0","')}%"),r}("[bold]".concat(t,"[/] allocation"),a,l,c);return function(){e.dispose()}}),[a,l,c]),r.a.createElement("div",{style:{width:"50%",height:"200px"}},r.a.createElement("div",{id:a,style:{height:"200px"}}))};function le(e,t,a,n,r){return I.a.map(e.data.reports,(function(i){var l=a.map((function(a){return{assetClass:a,totalInAssetClass:parseFloat(G(e,i,t,(function(e){return e.class===a}),n).toFixed(0))}})),o={date:new Date(i.datetime)};return I.a.map(l,(function(e){o[e.assetClass]=void 0!==r?r(e.totalInAssetClass):e.totalInAssetClass})),o}))}function oe(e,t,a,n,r){if(!a)return null;var i=T.d(t,$.k);ee(i,!1),i.data=a;var l=i.titles.push(new T.b);l.text=e,l.fontSize=25,l.marginBottom=15;var o=i.yAxes.push(new $.j);o.title.text="".concat(r),o.calculateTotals=!0;var c=I.a.filter(I.a.keys(a[0]),(function(e){return I.a.includes(n,e)})),s=I.a.map(a,(function(e){return I.a.sum(I.a.map(c,(function(t){return e[t]})))})),u=I.a.filter(s,(function(e){return e<0})).length>0,d=I.a.filter(s,(function(e){return e>0})).length>0;return I.a.map(c,(function(e){var t=i.series.push(new $.g);return t.dataFields.dateX="date",t.dataFields.valueY=e,t.name=e,t.strokeWidth=2,t.tooltipText="{name}: [bold]{valueY.value.formatNumber('".concat("#,###.","')} ").concat(r,"[/]"),u&&d||(t.tooltipText+=" ({valueY.totalPercent.formatNumber('".concat("#.0s","')} %)")),t.bullets.push(new $.b),t.fillOpacity=.7,t.stacked=!0,t.tensionX=.8,t})),i}var ce=function(){var e="nw_valuation_allocation_stacked_timeline_chart",t=Object(n.useContext)(It),a=Object(n.useContext)(Ct),i=H({store:t}),l=le(t,a,i,(function(e){return!0}));return Object(n.useEffect)((function(){var t=oe("Net worth valuation allocation history",e,l,i,a);return function(){null===t||void 0===t||t.dispose()}}),[l,i,a,e]),r.a.createElement("div",{id:e,style:{width:"100%",height:"500px",marginBottom:"100px"}})},se=function(){var e="assets_percentage_allocation_stacked_timeline_chart",t=Object(n.useContext)(It),a=Object(n.useContext)(Ct),i=H({store:t,mode:"assets"}),l=le(t,a,i,(function(e){return parseFloat(e.balance)>=0}));return Object(n.useEffect)((function(){var t=oe("Assets valuation allocation history",e,l,i,a);return function(){null===t||void 0===t||t.dispose()}}),[a,l,e,i]),r.a.createElement("div",{id:e,style:{width:"100%",height:"500px",marginBottom:"100px"}})},ue=function(){var e="liabilities_percentage_allocation_stacked_timeline_chart",t=Object(n.useContext)(It),a=Object(n.useContext)(Ct),i=H({store:t,mode:"liabilities"}),l=le(t,a,i,(function(e){return parseFloat(e.balance)<0}),Math.abs);return Object(n.useEffect)((function(){var t=oe("Liabilities valuation allocation history",e,l,i,a);return function(){null===t||void 0===t||t.dispose()}}),[a,l,e,i]),r.a.createElement("div",{id:e,style:{width:"100%",height:"500px",marginBottom:"100px"}})};T.f(C.a),T.f(k.a);var de,me=function(){var e=Object(n.useContext)(Tt),t=e.reportCurrencies[0],a=Object(n.useState)(t),i=Object(o.a)(a,2),l=i[0],c=i[1];return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("label",null,"Select report currency:",r.a.createElement("select",{value:l,onChange:function(e){return c(e.target.value)}},r.a.createElement(r.a.Fragment,null,I.a.map(e.reportCurrencies,(function(e){return r.a.createElement("option",{key:e,value:e},e)})))))),r.a.createElement(Ct.Provider,{value:l},r.a.createElement(ve,null)))},ve=function(){var e=Object(n.useContext)(It),t=H({store:e}).length,a=H({store:e,mode:"assets"}).length,i=H({store:e,mode:"liabilities"}).length,l=t>1?r.a.createElement("div",{style:{width:"100%",height:300,display:"flex",marginBottom:"300px"}},r.a.createElement("div",{style:{width:"100%",height:300}},r.a.createElement(ce,null))):null,o={width:"100%",height:300,display:"flex",marginBottom:"300px"},c=a&&i?r.a.createElement("div",{style:o},r.a.createElement("div",{style:{width:"100%",height:300}},r.a.createElement(se,null))):null,s=i?r.a.createElement("div",{style:o},r.a.createElement("div",{style:{width:"100%",height:300}},r.a.createElement(ue,null))):null;return r.a.createElement("div",null,r.a.createElement("h1",null,"Charts"),r.a.createElement("div",{style:{width:"100%",height:300,display:"flex",marginBottom:"300px"}},r.a.createElement("div",{style:{width:"50%",height:300}},r.a.createElement(te,{stacked:!1})),r.a.createElement("div",{style:{width:"50%",height:300}},r.a.createElement(ae,{stacked:!1}))),l,c,s,r.a.createElement("div",{style:{width:"100%",height:"200px",marginBottom:"300px",display:"flex"}},r.a.createElement("div",{style:{width:"100%",height:"300px"}},r.a.createElement(ne,null))),r.a.createElement("div",{style:{width:"100%",height:"300px",marginTop:"300px",marginBottom:"200px",display:"flex"}},r.a.createElement(re,null)))},fe=a(317),pe=a(318),Ee=a(218),be=a.n(Ee),ge=a(219),he=a.n(ge),ye=a(220),xe=a.n(ye),Ae=a(315),Oe=a(343),Se=a(316),we=Object(Ae.a)((function(e){return Object(Oe.a)({text:{padding:e.spacing(2,2,0)},paper:{paddingBottom:50},list:{marginBottom:e.spacing(2)},subheader:{backgroundColor:e.palette.background.paper},appBar:{top:"auto",bottom:0},grow:{flexGrow:1},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"},fullList:{width:"auto"}})})),je=I.a.values({0:"/",1:"/assets-and-reports",2:"/import-export"}),Ie=function(e,t){return"/"===e?"/"===t:t.startsWith(e)},Te=function(){var e=we(),t=Object(s.f)(),a=r.a.useState(void 0),i=Object(o.a)(a,2),l=i[0],u=i[1];return Object(n.useEffect)((function(){je.some((function(e){return Ie(e,t.pathname)}))||u(void 0);var e=je.findIndex((function(e){return Ie(e,t.pathname)}));-1!==e&&u(e)}),[t.pathname,l]),r.a.createElement(Se.a,{position:"fixed",className:e.appBar},r.a.createElement(fe.a,{value:l,onChange:function(e,t){console.log({event:e,newValue:t}),u(t)}},r.a.createElement(pe.a,{component:c.b,to:".",label:"Charts",icon:r.a.createElement(be.a,null)}),r.a.createElement(pe.a,{component:c.b,to:"assets-and-reports",label:"Data",icon:r.a.createElement(he.a,null)}),r.a.createElement(pe.a,{component:c.b,to:"import-export",label:"Export/import",icon:r.a.createElement(xe.a,null)})))},Ce=a(321),ke=a(325),_e=a(324),Re=a(322),De=a(323),Be=a(319),Fe=a(320),Ue=a(48),Ne=Object(Ae.a)((function(e){var t;return Object(Oe.a)({root:(t={padding:e.spacing(2)},Object(Ue.a)(t,e.breakpoints.down("sm"),{padding:e.spacing(2,1)}),Object(Ue.a)(t,e.breakpoints.up("lg"),{padding:e.spacing(4)}),t)})})),Le=function(e){var t=e.children,a=Ne();return r.a.createElement("div",{className:a.root},t)},Me=function(){var e,t=Object(n.useContext)(It);return r.a.createElement(Le,null,r.a.createElement(Be.a,{container:!0,spacing:1},r.a.createElement(Be.a,{item:!0},r.a.createElement(B.a,{startIcon:r.a.createElement(Fe.a,null),to:"sort",component:c.b,variant:"contained",color:"secondary",size:"small"},"sort")),r.a.createElement(Be.a,{item:!0},r.a.createElement(B.a,{to:"create",component:c.b,variant:"contained",color:"secondary",size:"small"},"add"))),r.a.createElement(Ce.a,{stickyHeader:!0},r.a.createElement(Re.a,null,r.a.createElement(De.a,null,r.a.createElement(_e.a,null,"type"),r.a.createElement(_e.a,null,"name"),r.a.createElement(_e.a,null,"used in"))),r.a.createElement(ke.a,null,null===(e=K(t))||void 0===e?void 0:e.map((function(e){var a=Q(t).filter((function(t){return t.institutionId===e.id}));return(r.a.createElement(De.a,{hover:!0,key:e.id,component:c.b,to:e.id},r.a.createElement(_e.a,null,e.type),r.a.createElement(_e.a,null,e.name),r.a.createElement(_e.a,null,a.length)))})))))},Pe=a(91),qe=Object(m.a)({id:"form",initial:"idle",states:{idle:{on:{SUBMIT:"submitting"}},validating:{},submitting:{entry:Object(v.b)((function(e,t){return console.log("e",t,"---context.form.getValues();",e.form.getValues()),console.log("======"),{}})),on:{"":"submitted"}},submitted:{on:{REINIT:"idle"}}}}),Ye=function(e){var t,a,i,l=e.storeService,c=Object(n.useContext)(It),s=Object(Pe.b)(),d=Object(u.useMachine)(qe,{devTools:!0,context:{form:s}}),m=Object(o.a)(d,2),v=m[0],f=m[1];Object(n.useEffect)((function(){v.matches("submitted")&&(l.send("UPDATE_DATA",{actionType:"create",entity:"assetAccounts",data:v.context.form.getValues()}),f("REINIT"))}),[v,f,l]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Asset accounts ",null===(t=Q(c))||void 0===t?void 0:t.length),r.a.createElement("form",{onSubmit:s.handleSubmit((function(e){f("SUBMIT")}))},r.a.createElement(N,null,r.a.createElement("thead",null,r.a.createElement(L,null,r.a.createElement(P,{colspan:4}),r.a.createElement(P,null,"Used in # of")),r.a.createElement(L,null,r.a.createElement(P,null,"id"),r.a.createElement(P,null,"asset"),r.a.createElement(P,null,"institution"),r.a.createElement(P,null,"name"),r.a.createElement(P,null,"reports"))),r.a.createElement("tbody",null,r.a.createElement(L,null,r.a.createElement(M,null),r.a.createElement(M,null,r.a.createElement("select",{name:"assetId",ref:s.register({required:"Required"})},c.data.assets.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.class," ",e.subclass," ",e.name)})))),r.a.createElement(M,null,r.a.createElement("select",{name:"institutionId",ref:s.register({required:"Required"})},c.data.institutions.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.type," ",e.name)})))),r.a.createElement(M,null,r.a.createElement("input",{name:"name",ref:s.register({required:"Required"})}),r.a.createElement("br",null),null===(a=s.errors.name)||void 0===a?void 0:a.message),r.a.createElement(M,null),r.a.createElement(M,null,r.a.createElement("button",{type:"submit"},"Save"))),null===(i=Q(c))||void 0===i?void 0:i.map((function(e){var t,a;if(void 0===c)return null;var n=c.data.assetAccountStates.filter((function(t){return t.assetAccountId===e.id}));return(r.a.createElement(L,{key:e.id},r.a.createElement(M,null,e.id),r.a.createElement(M,null,null===(t=c.data.assets.find((function(t){return t.id===e.assetId})))||void 0===t?void 0:t.name),r.a.createElement(M,null,null===(a=c.data.institutions.find((function(t){return t.id===e.institutionId})))||void 0===a?void 0:a.name),r.a.createElement(M,null,e.name),r.a.createElement(M,null,n.length),r.a.createElement(M,null,0===n.length&&r.a.createElement("button",{type:"button",onClick:function(){return t=e.id,void l.send({type:"UPDATE_DATA",actionType:"delete",entity:"assetAccounts",data:{id:t}});var t}},"delete"))))}))))))},ze=function(e){var t,a,i,l,c,s=e.storeService,d=Object(n.useContext)(It),m=Object(Pe.b)(),v=Object(u.useMachine)(qe,{devTools:!0,context:{form:m}}),f=Object(o.a)(v,2),p=f[0],E=f[1];Object(n.useEffect)((function(){p.matches("submitted")&&(s.send("UPDATE_DATA",{actionType:"create",entity:"assets",data:p.context.form.getValues()}),E("REINIT"))}),[p,E,s]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Assets ",null===(t=d.data.assets)||void 0===t?void 0:t.length),r.a.createElement("form",{onSubmit:m.handleSubmit((function(e){E("SUBMIT")}))},r.a.createElement(N,null,r.a.createElement("thead",null,r.a.createElement(L,null,r.a.createElement(P,{colspan:5}),r.a.createElement(P,null,"Used in # of")),r.a.createElement(L,null,r.a.createElement(P,null,"ID"),r.a.createElement(P,null,"class"),r.a.createElement(P,null,"subclass"),r.a.createElement(P,null,"name"),r.a.createElement(P,null,"currency"),r.a.createElement(P,null,"asset accounts"))),r.a.createElement("tbody",null,r.a.createElement(L,null,r.a.createElement(M,null),r.a.createElement(M,null,r.a.createElement("select",{name:"class",ref:m.register({required:"Required"})},Y.map((function(e){return r.a.createElement("option",{value:e},e)})))),r.a.createElement(M,null,r.a.createElement("input",{name:"subclass",ref:m.register({required:"Required"})}),null===(a=m.errors.subclass)||void 0===a?void 0:a.message),r.a.createElement(M,null,r.a.createElement("input",{name:"name",ref:m.register({required:"Required"})}),r.a.createElement("br",null),null===(i=m.errors.name)||void 0===i?void 0:i.message),r.a.createElement(M,null,r.a.createElement("input",{name:"currency",ref:m.register({required:"Required"})}),r.a.createElement("br",null),null===(l=m.errors.currency)||void 0===l?void 0:l.message),r.a.createElement(M,null),r.a.createElement(M,null,r.a.createElement("button",{type:"submit"},"Save"))),null===(c=d.data.assets)||void 0===c?void 0:c.map((function(e){var t,a=null===(t=Q(d))||void 0===t?void 0:t.filter((function(t){return t.assetId===e.id}));return r.a.createElement(L,{key:e.id},r.a.createElement(M,null,e.id),r.a.createElement(M,null,e.class),r.a.createElement(M,null,e.subclass),r.a.createElement(M,null,e.name),r.a.createElement(M,null,e.currency),r.a.createElement(M,null,a.length),r.a.createElement(M,null,0===a.length&&r.a.createElement("button",{type:"button",onClick:function(){return t=e.id,void s.send({type:"UPDATE_DATA",actionType:"delete",entity:"assets",data:{id:t}});var t}},"delete")))}))))))},Ve=a(341),Xe=a(326),We=function(){var e=r.a.useState(0),t=Object(o.a)(e,2),a=t[0],n=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Se.a,{position:"sticky"},r.a.createElement(Ve.a,{value:a,onChange:function(e,t){n(t)},"aria-label":"simple tabs example",variant:"scrollable",scrollButtons:"desktop"},r.a.createElement(Xe.a,{label:"Reports",component:c.b,to:"."}),r.a.createElement(Xe.a,{label:"Assets",component:c.b,to:"assets"}),r.a.createElement(Xe.a,{label:"Institutions",component:c.b,to:"institutions"}),r.a.createElement(Xe.a,{label:"Asset accounts",component:c.b,to:"asset-accounts"}))))},Je=a(342),He=a(331),Ge=a(86),Ke=a(327),Qe=function(){return r.a.createElement(B.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(Ke.a,null),type:"submit"},"Save")},Ze=function(e){var t,a,i,l,o=e.storeService,c=Object(n.useContext)(It),u=Object(s.h)(),m=Q(c),v={};if(void 0!==u.reportId){i=c.data.reports.find((function(e){return e.id===u.reportId}));var f=c.data.assetAccountStates.filter((function(e){var t;return e.reportId===(null===(t=i)||void 0===t?void 0:t.id)}));v=c.data.exchangeRates.find((function(e){var t;return e.reportId===(null===(t=i)||void 0===t?void 0:t.id)})).data,l=null===m||void 0===m?void 0:m.map((function(e){var t,a=null===f||void 0===f?void 0:f.find((function(t){return t.assetAccountId===e.id}));return void 0!==a?a:{assetAccountId:e.id,reportId:null===(t=i)||void 0===t?void 0:t.id,balance:"0",comment:""}}))}var p=m.reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),{},Object(Ue.a)({},t.assetId,Ge.d().required("\u0437\u0430\u043f\u043e\u043b\u043d\u044f\u0439 \u043a\u0443\u0440\u0441, \u0441\u0443\u043a\u0430")))}),{}),E=Ge.c({date:Ge.b().required("\u0434\u0430\u0442\u0430!"),assetAccountStates:Ge.a().of(Ge.c({balance:Ge.d().required("\u0437\u0430\u043f\u043e\u043b\u043d\u044f\u0439, \u0441\u0443\u043a\u0430"),assetAccountId:Ge.d().required("\u0437\u0430\u043f\u043e\u043b\u043d\u044f\u0439, \u0441\u0443\u043a\u0430")})),exchangeRates:Ge.c(p)}),b=Object(Pe.b)({validationSchema:E,defaultValues:{date:(null===(t=i)||void 0===t?void 0:t.datetime)?new Date(i.datetime).toISOString().substr(0,10):(new Date).toISOString().substr(0,10),assetAccountStates:l,exchangeRates:v}}),g=Object(s.g)(),h=(new Date).getTime(),y=I.a.maxBy(I.a.filter(c.data.reports,(function(e){return e.datetime<(i?i.datetime:h)})),(function(e){return e.datetime})),x=c.data.assetAccountStates.filter((function(e){return e.reportId===(null===y||void 0===y?void 0:y.id)})),A=c.data.exchangeRates.find((function(e){return e.reportId===(null===y||void 0===y?void 0:y.id)}));return console.log("-----form.errors",b.errors),r.a.createElement("div",null,r.a.createElement("h1",null,"Add report"),r.a.createElement("form",{onSubmit:b.handleSubmit((function(e){console.log("=====values",e.date,e),void 0===i?o.send({type:"UPDATE_DATA",actionType:"create",entity:"assetAccountStates",data:e}):o.send({type:"UPDATE_DATA",actionType:"update",entity:"assetAccountStates",data:Object(d.a)({reportId:i.id},e)}),g("/assets-and-reports")}))},r.a.createElement("input",{type:"date",name:"date",ref:b.register}),null===(a=b.errors.date)||void 0===a?void 0:a.message,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N,null,r.a.createElement("tbody",null,null===m||void 0===m?void 0:m.map((function(e,t){var a,n,i,l,o,s,u,d,v,f,p,E,g=c.data.assets.find((function(t){return t.id===e.assetId})),h=0===t||m[t].institutionId!==m[t-1].institutionId?r.a.createElement(L,{key:"header".concat(e.id)},r.a.createElement(M,{colspan:2},r.a.createElement("h3",null,null===(a=K(c))||void 0===a?void 0:null===(n=a.find((function(t){return t.id===e.institutionId})))||void 0===n?void 0:n.name))):null,y=(null===x||void 0===x?void 0:null===(i=x.find((function(t){return t.assetAccountId===e.id})))||void 0===i?void 0:i.balance)||"0",O=(null===A||void 0===A?void 0:A.data[g.id])||"none",S=void 0!==(null===m||void 0===m?void 0:m.slice(0,t).find((function(t){return t.assetId===e.assetId}))),w=S&&b.watch("exchangeRates"),j=r.a.createElement(L,{key:"data".concat(e.id)},r.a.createElement(M,null,r.a.createElement(Pe.a,{as:Je.a,label:e.name,InputLabelProps:{shrink:!0,disableAnimation:!0},InputProps:{endAdornment:r.a.createElement(F.a,{"aria-label":"use last balance",color:"secondary",size:"small",onClick:function(){return b.setValue("assetAccountStates[".concat(t,"].balance"),y)}},r.a.createElement(He.a,null))},name:"assetAccountStates[".concat(t,"].balance"),control:b.control,variant:"outlined",helperText:void 0!==(null===(l=b.errors.assetAccountStates)||void 0===l?void 0:null===(o=l[t])||void 0===o?void 0:o.balance)?(null===(s=b.errors.assetAccountStates)||void 0===s?void 0:null===(u=s[t])||void 0===u?void 0:u.balance).message:"last balance: ".concat(J(y)),error:Boolean(null===(d=b.errors.assetAccountStates)||void 0===d?void 0:null===(v=d[t])||void 0===v?void 0:v.balance)}),r.a.createElement("input",{type:"hidden",name:"assetAccountStates[".concat(t,"].assetAccountId"),ref:b.register,value:e.id})),r.a.createElement(M,null,S?!1===w?null:w[e.assetId]:r.a.createElement(Pe.a,{as:Je.a,InputLabelProps:{shrink:!0,disableAnimation:!0},name:"exchangeRates[".concat(e.assetId,"]"),label:"1 ".concat(g.name," in ").concat(g.currency),control:b.control,variant:"outlined",helperText:void 0!==(null===(f=b.errors.exchangeRates)||void 0===f?void 0:f[e.assetId])?null===(p=b.errors.exchangeRates)||void 0===p?void 0:p[e.assetId].message:"last ex. rate: ".concat(O),error:Boolean(null===(E=b.errors.exchangeRates)||void 0===E?void 0:E[e.assetId])})));return r.a.createElement(r.a.Fragment,{key:e.id},h,j)})))),r.a.createElement(Qe,null)))},$e=a(199),et=a(340),tt=a(333),at=a(332),nt=function(e){var t=e.onClick,a=e.disabled;return(r.a.createElement(B.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(at.a,null),onClick:t,disabled:a},"Delete"))},rt=Ge.c((de={},Object(Ue.a)(de,"type",Ge.d().required("required")),Object(Ue.a)(de,"name",Ge.d().required("required")),de)),it=function(e){var t,a,i,l,c,m,v,f=e.storeService,p=Object(s.h)(),E=Object(n.useContext)(It),b=Object(s.g)();void 0!==p.institutionId&&(v=E.data.institutions.find((function(e){return e.id===p.institutionId})));var g=Object(Pe.b)({validationSchema:rt,defaultValues:{type:null===(t=v)||void 0===t?void 0:t.type,name:null===(a=v)||void 0===a?void 0:a.name}}),h=Object(u.useMachine)(qe,{devTools:!0,context:{form:g}}),y=Object(o.a)(h,2),x=y[0],A=y[1];Object(n.useEffect)((function(){x.matches("submitted")&&(void 0===v?f.send("UPDATE_DATA",{actionType:"create",entity:"institutions",data:Object(d.a)(Object(d.a)({},rt.validateSync(x.context.form.getValues())),{},{sortIndex:0})}):f.send("UPDATE_DATA",{actionType:"update",entity:"institutions",data:Object(d.a)({id:v.id},rt.validateSync(x.context.form.getValues()))}),A("REINIT"),b(".."))}),[x,A,f,v,b]);var O=Q(E).filter((function(e){var t;return e.institutionId===(null===(t=v)||void 0===t?void 0:t.id)}));return(r.a.createElement(Le,null,r.a.createElement("form",{onSubmit:g.handleSubmit((function(e){console.log("________",e),A("SUBMIT")}))},r.a.createElement(Be.a,{container:!0,direction:"column",spacing:3},r.a.createElement(Be.a,{item:!0},r.a.createElement($e.a,{variant:"h1"},void 0!==(null===(i=v)||void 0===i?void 0:i.id)?"Edit":"Add"," Institution")),r.a.createElement(Be.a,{item:!0},r.a.createElement(Be.a,{container:!0,direction:"column",spacing:2},r.a.createElement(Be.a,{item:!0},r.a.createElement(Pe.a,{as:et.a,name:"type",control:g.control,variant:"outlined",error:Boolean(null===(l=g.errors.type)||void 0===l?void 0:l.message)},z.map((function(e){return r.a.createElement(tt.a,{value:e},e)})))),r.a.createElement(Be.a,{item:!0},r.a.createElement(Pe.a,{as:Je.a,name:"name",control:g.control,variant:"outlined",placeholder:"Name",label:"Name",error:Boolean(null===(c=g.errors.name)||void 0===c?void 0:c.message),helperText:null===(m=g.errors.name)||void 0===m?void 0:m.message})))),r.a.createElement(Be.a,{item:!0},r.a.createElement(Qe,null)),void 0!==v&&r.a.createElement(Be.a,{item:!0},r.a.createElement(Be.a,{container:!0,direction:"column",spacing:1},0!==O.length&&r.a.createElement(Be.a,{item:!0},r.a.createElement($e.a,{variant:"body1",color:"textSecondary"},"used in ",O.length," of asset accounts thus can not be deleted")),r.a.createElement(Be.a,{item:!0},r.a.createElement(nt,{onClick:function(){var e,t;console.log("----delete",null===(e=v)||void 0===e?void 0:e.id),f.send({type:"UPDATE_DATA",actionType:"delete",entity:"institutions",data:{id:null===(t=v)||void 0===t?void 0:t.id}}),b("..")},disabled:0!==O.length}))))))))},lt=a(206),ot=a(224),ct=a.n(ot),st=a(330),ut=a(261),dt=a(334),mt=a(335),vt=a(225),ft=a.n(vt),pt=Object(lt.b)((function(e){var t=e.value;return(r.a.createElement(ut.a,{ContainerComponent:"div"},r.a.createElement(dt.a,{primary:t}),r.a.createElement(mt.a,null,r.a.createElement(ft.a,null))))})),Et=Object(lt.a)((function(e){var t=e.children;return(r.a.createElement(st.a,{component:"div"},t))})),bt=function(e){var t=K(Object(n.useContext)(It)),a=Object(n.useState)(t),i=Object(o.a)(a,2),l=i[0],c=i[1];return r.a.createElement(Et,{onSortEnd:function(t){var a=ct()(l,t.oldIndex,t.newIndex);c(a),a.forEach((function(t,a){e.storeService.send("UPDATE_DATA",{actionType:"update",entity:"institutions",data:Object(d.a)(Object(d.a)({},t),{},{sortIndex:a+1})})}))}},l.map((function(e,t){return r.a.createElement(pt,{key:"item-".concat(e.id),index:t,value:e.name})})))},gt=function(e){var t=e.storeService;return(r.a.createElement(r.a.Fragment,null,r.a.createElement(We,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"institutions",element:r.a.createElement(Me,null)}),r.a.createElement(s.a,{path:"institutions/:institutionId",element:r.a.createElement(it,{storeService:t})}),r.a.createElement(s.a,{path:"institutions/sort",element:r.a.createElement(bt,{storeService:t})}),r.a.createElement(s.a,{path:"assets",element:r.a.createElement(ze,{storeService:t})}),r.a.createElement(s.a,{path:"asset-accounts",element:r.a.createElement(Ye,{storeService:t})}),r.a.createElement(s.a,{element:r.a.createElement(Z,{storeService:t})}),r.a.createElement(s.a,{path:"add-edit-report/:reportId",element:r.a.createElement(Ze,{storeService:t})}),r.a.createElement(s.a,{path:"add-edit-report",element:r.a.createElement(Ze,{storeService:t})}))))},ht=function(e){var t=e.state,a=e.send,n=(e.storeService,Object(s.g)());return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(B.a,{variant:"contained",component:"label",color:"primary",size:"large",onClick:function(){!function(e){var t=new Blob([e],{type:"text/json;charset=UTF-8"}),a=new FileReader;a.onload=function(){var e=document.createElement("a");e.setAttribute("href",a.result),e.setAttribute("download","fintrack.json"),document.body.appendChild(e),e.click()},a.readAsDataURL(t)}(JSON.stringify(t.context.db,null,2))}},"export"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(B.a,{variant:"contained",component:"label",color:"primary",size:"large"},"import",r.a.createElement("div",{style:{display:"none "}},r.a.createElement("input",{type:"file",onChange:function(e){var t=new FileReader;t.onload=function(e){console.log(e.target.result);var t=JSON.parse(e.target.result);a("LOAD_FROM_INPUT",{data:t}),n("/")},t.readAsText(e.target.files[0])}}))))},yt=a(336),xt=a(226),At=a(338),Ot=a(339),St=a(198),wt=a(337),jt=function(e){var t=e.children,a=Object(yt.a)("(prefers-color-scheme: dark)"),n=r.a.useMemo((function(){return Object(xt.a)({breakpoints:{values:{xs:320,sm:375,md:768,lg:1024,xl:1368}},spacing:8,typography:{h1:{fontSize:30},h2:{fontSize:26},h3:{fontSize:22}},palette:{primary:{main:St.a[500]},secondary:{main:wt.a[400]},type:a?"dark":"light"}})}),[a]);return r.a.createElement(At.a,{theme:n},r.a.createElement(Ot.a,null),t)},It=(a(256),r.a.createContext(A)),Tt=r.a.createContext({reportCurrencies:["USD","EUR","RUB"],baseCurrency:"USD"}),Ct=r.a.createContext("USD"),kt=function(){var e=Object(u.useMachine)(w,{devTools:!0}),t=Object(o.a)(e,3),a=t[0],n=t[1],i=t[2];return(r.a.createElement(It.Provider,{value:a.context.db.getState()},r.a.createElement(Tt.Provider,{value:{baseCurrency:"USD",reportCurrencies:["USD","EUR","RUB"]}},r.a.createElement(c.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(jt,null,r.a.createElement("div",{className:"_3QqL3"},r.a.createElement("div",{className:"_2KOUX"},r.a.createElement(s.c,null,r.a.createElement(s.a,{element:r.a.createElement(me,null)}),r.a.createElement(s.a,{path:"assets-and-reports/*",element:r.a.createElement(gt,{storeService:i})}),r.a.createElement(s.a,{path:"import-export",element:r.a.createElement(ht,{state:a,send:n,storeService:i})}))),r.a.createElement(Te,null))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(257);l.a.render(r.a.createElement(kt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[241,1,3]]]);
//# sourceMappingURL=main.a41d1852.chunk.js.map